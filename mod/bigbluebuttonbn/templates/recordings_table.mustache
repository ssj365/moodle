{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template mod_bigbluebuttonbn/recordings_table

    This template renders the mobile page.

    Example context (json):
    {
    }
}}
{{#recordings.session.has_recordings}}
<div class="mod_bigbluebuttonbn_recordings_table table table-striped" data-bbbid="{{recordings.session.bbbid}}">
    <div>
        <h4>{{$title}}{{/title}}</h4>
    </div>
    <div class="mt-3">
        {{#recordingwarnings}}
            {{>core/notification}}
        {{/recordingwarnings}}
    </div>
    <div>
        {{#search}}
            {{>mod_bigbluebuttonbn/search_input_recordings}}
        {{/search}}
        <div {{!
            }} id="bigbluebuttonbn-recording-table-{{uniqid}}"{{!
            }} data-bbbid="{{$bbbid}}{{bbbid}}-test{{/bbbid}}"{{!
            }} data-tools="{{$tools}}protect,unprotect,publish,unpublish,delete{{/tools}}"{{!
            }} data-group-id="{{groupid}}"{{!
            }} {{$otherattributes}}{{/otherattributes}}{{!
        }}></div>
    </div>
    {{#recordings.output}}
        {{#first}}
        <div class="row mb-3 font-weight-bold">
            <div class="col-md-1">{{#str}}view_recording_playback, mod_bigbluebuttonbn{{/str}}</div>
            <div class="col-md-1 sortable-header" data-sort="name">{{#str}}view_recording_name, mod_bigbluebuttonbn{{/str}} <span class="sort-icon">▲</span></div>
            <div class="col-md-2 sortable-header" data-sort="description">{{#str}}view_recording_description, mod_bigbluebuttonbn{{/str}} <span class="sort-icon">▲</span></div>
            <div class="col-md-1">{{#str}}view_recording_preview, mod_bigbluebuttonbn{{/str}}</div>
            <div class="col-md-2 sortable-header" data-sort="date">{{#str}}view_recording_date, mod_bigbluebuttonbn{{/str}} <span class="sort-icon">▲</span></div>
            <div class="col-md-1">{{#str}}view_recording_duration, mod_bigbluebuttonbn{{/str}}</div>
            <div class="col-md-4">{{#str}}view_recording_actionbar, mod_bigbluebuttonbn{{/str}}</div>
        </div>
        {{/first}}
        <div class="row mb-3 align-items-center">
            <div class="col-md-1">
                {{{playback}}}
            </div>
            <div class="col-md-1" data-sort="name">
                {{{recording}}}
            </div>
            <div class="col-md-2" data-sort="description">
                {{{description}}}
            </div>
            <div class="col-md-1">
                {{{preview}}}
            </div>
            <div class="col-md-2" data-sort="date">
                {{{date}}}
            </div>
            <div class="col-md-1">
                {{{duration}}}
            </div>
            <div class="col-md-4">
                {{{actionbar}}}
            </div>
        </div>
    {{/recordings.output}}
    {{^recordings.output}}
        <div id="bigbluebuttonbn_recordings_table">{{#str}}view_message_norecordings, mod_bigbluebuttonbn{{/str}}</div>
        <div class="mt-3">
            {{#recordingwarnings}}
                {{>core/notification}}
            {{/recordingwarnings}}
        </div>
    {{/recordings.output}}
</div>

<div id="paginationControls" class="mt-3">
    <button id="firstPage" class="btn btn-sm btn-secondary">{{#str}}view_recording_yui_first, mod_bigbluebuttonbn{{/str}}</button>
    <button id="prevPage" class="btn btn-sm btn-secondary">{{#str}}view_recording_yui_prev, mod_bigbluebuttonbn{{/str}}</button>
    <select id="pageSelect" class="form-control d-inline-block w-auto"></select>
    <button id="nextPage" class="btn btn-sm btn-secondary">{{#str}}view_recording_yui_next, mod_bigbluebuttonbn{{/str}}</button>
    <button id="lastPage" class="btn btn-sm btn-secondary">{{#str}}view_recording_yui_last, mod_bigbluebuttonbn{{/str}}</button>
</div>    

{{#js}}
    require([
        'mod_bigbluebuttonbn/recordings',
        'mod_bigbluebuttonbn/recordings_pagination',
        'mod_bigbluebuttonbn/recordings_search'
    ], function(recordings, recordingsPagination, recordingsSearch) {
        recordingsPagination.setupPagination();
        recordingsSearch.setupSearch();
    });
{{/js}}
{{/recordings.session.has_recordings}}
